---
title: v5 to v6
description: Migrate Nuxt OG Image v5 to Nuxt OG Image v6.
---

## Nuxt Content v2 Support Removed

Nuxt Content v2 is no longer supported. If you're using `@nuxt/content`, you must upgrade to v3 or later.

The automatic `ogImage` frontmatter handling for Content v2 has been removed. Use `defineOgImage()` in your page components instead.

```ts
// pages/[...slug].vue
defineOgImage({
  component: 'NuxtSeo',
  // ...
})
```

## Config Changes

### `strictNuxtContentPaths` Removed

This option was deprecated and has no effect in Nuxt Content v3. Remove it from your config:

```diff
export default defineNuxtConfig({
  ogImage: {
-   strictNuxtContentPaths: true,
  }
})
```

### Chromium `node` Binding Removed

The deprecated `chromium: 'node'` compatibility option has been removed. Use `'playwright'` instead:

```diff
export default defineNuxtConfig({
  ogImage: {
    compatibility: {
      runtime: {
-       chromium: 'node',
+       chromium: 'playwright',
      }
    }
  }
})
```

## Import Path Changes

### `#nuxt-og-image-utils` Alias Removed

If you were importing from this legacy alias, update your imports:

```diff
- import { ... } from '#nuxt-og-image-utils'
+ import { ... } from '#og-image/shared'
```

### `useOgImageRuntimeConfig` Import Path

The deprecated stub export from `#og-image/shared` has been removed. Import from the correct path:

```diff
- import { useOgImageRuntimeConfig } from '#og-image/shared'
+ import { useOgImageRuntimeConfig } from '#og-image/app/utils'
```

## URL Path Changes

### Shorter Paths

OG Image URLs have been shortened:

| v5 | v6 |
|----|----|
| `/__og-image__/image/` | `/_og/d/` |
| `/__og-image__/static/` | `/_og/s/` |
| `/__og-image__/font/` | `/_og/f/` |
| `/__og-image__/debug.json` | `/_og/debug.json` |

### New Cloudinary-style URL Encoding

**Breaking:** OG Image URLs now encode all options directly in the URL path using a Cloudinary/IPX-style format. This enables automatic CDN caching since the same options always produce the same URL.

**v5 format:**
```
/_og/d/satori/og.png?width=1200&title=Hello%20World
```

**v6 format:**
```
/_og/s/w_1200,title_Hello+World,p_Ii9zYXRvcmki.png
```

Key changes:
- Options are comma-separated in the URL path (not query params)
- Known params use short aliases: `w` (width), `h` (height), `c` (component), `k` (key), etc.
- Component props are flattened to top level: `title_Hello+World`
- Complex values (fonts, query params) are base64 encoded
- Page path is encoded as `p_<base64>`

### Hash Mode for Long URLs (Prerendered Only)

When prerendering, if the encoded URL path exceeds 200 characters (filesystem limit is 255), the module automatically switches to hash mode:

```
/_og/s/o_1whacq.png
```

This typically happens with:
- Long component props (e.g., lengthy descriptions)
- Multiple custom fonts with base64-encoded configurations
- Complex query parameters

The hash is deterministic - the same options always produce the same hash. Options are cached by hash during prerendering for lookup when rendering the image. Hash mode URLs are not supported at runtime.

If you have any hardcoded references to the old URL format, update them to use `getOgImagePath()` instead:

```ts
import { getOgImagePath } from '#og-image/app/utils'

const ogImageUrl = getOgImagePath('/about', {
  props: { title: 'About Us' }
})
```

## Community Templates Must Be Ejected

Community templates (like `NuxtSeo`, `Brutalist`, `SimpleBlog`, etc.) are no longer bundled with production builds. If you're using a community template, you must eject it before building:

```bash
# List available templates
npx nuxt-og-image list

# Eject a specific template
npx nuxt-og-image eject NuxtSeo
```

This copies the template to your `components/OgImage/` directory where it will be included in your build.

**In development**, community templates continue to work without ejecting - they're loaded directly from the module.

**In production**, only ejected templates are available. If you reference a community template that hasn't been ejected, you'll get an error.

After ejecting, you can customize the template as needed. The ejected components are yours to modify.

## Behavior Changes

### Sharp JPEG Errors

Previously, if Sharp failed to load for JPEG rendering, it would log an error and fall back to PNG silently. Now it throws an error.

Ensure Sharp is properly installed and your runtime supports it if you're using JPEG output. See the [Renderers](/docs/og-image/renderers) guide for details.
